<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Specifying attribute hierarchies • dcmstan</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Playfair_Display-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Specifying attribute hierarchies">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dcmstan</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/dcmstan.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/attribute-hierarchies.html">Specifying attribute hierarchies</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://r-dcm.org/blog/2025-11-dcmstan-0.1.0/">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-dcm/dcmstan/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Specifying attribute hierarchies</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-dcm/dcmstan/blob/main/vignettes/articles/attribute-hierarchies.Rmd" class="external-link"><code>vignettes/articles/attribute-hierarchies.Rmd</code></a></small>
      <div class="d-none name"><code>attribute-hierarchies.Rmd</code></div>
    </div>

    
    
<p>When specifying a diagnostic classification model (DCM), it is common
to define relationships between the measured attributes. For example,
one attribute may be a precursor or successor to another attribute. In
other words, the attributes form a hierarchy. In this article, we
describe how to define different hierarchical relationships with
dcmstan.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dcmstan.r-dcm.org">dcmstan</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="choosing-a-structural-model">Choosing a structural model<a class="anchor" aria-label="anchor" href="#choosing-a-structural-model"></a>
</h2>
<p>dcmstan supports two structural models that have the ability to
specify an attribute hierarchy. The hierarchical diagnostic
classification model <span class="citation">(HDCM; <a href="#ref-hdcm">Templin &amp; Bradshaw, 2014</a>)</span> can be defined
with <code><a href="../reference/structural-model.html">hdcm()</a></code>. The HDCM assumes a strict attribute hierarchy.
That is, possible profiles that conflict with the defined hierarchy are
completely excluded from the model. On the other hand, we can use a
Bayesian Network <span class="citation">(BayesNet; <a href="#ref-bayesnet">Hu &amp; Templin, 2020</a>)</span> as the
structural model using <code><a href="../reference/structural-model.html">bayesnet()</a></code>. The BayesNet enforces a
less restrictive hierarchy. All possible profiles are still included in
the model, but profiles that are inconsistent with the defined hierarchy
are less likely.</p>
<p>Both <code><a href="../reference/structural-model.html">hdcm()</a></code> and <code><a href="../reference/structural-model.html">bayesnet()</a></code> include a
<code>hierarchy</code> argument that can be used to define specific
relationships between attributes. In the following sections, we describe
different attribute structures and show how to define these structures
with dcmstan.</p>
</div>
<div class="section level2">
<h2 id="attribute-structures">Attribute structures<a class="anchor" aria-label="anchor" href="#attribute-structures"></a>
</h2>
<p>In general, hierarchies can be classified into two broad categories:
simple and complex structures.</p>
<div class="section level3">
<h3 id="simple-structures">Simple structures<a class="anchor" aria-label="anchor" href="#simple-structures"></a>
</h3>
<p>For simple structures, attributes can exhibit a linear, converging,
or diverging relationship.</p>
<div class="figure">
<img src="attribute-hierarchies_files/figure-html/simple-structure-1.png" class="r-plt" alt="Simple attribute structures" width="768"><p class="caption">
Simple attribute structures
</p>
</div>
<p>In a linear structure, the attributes must be acquired in a specific
order, one after the other. In the figure, a respondent must be
proficient on A1 before they can acquire the skills in A2, followed by
A3. We can specify this relationship in dcmstan as:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A1 -&gt; A2 -&gt; A3"</span><span class="op">)</span></span></code></pre></div>
<p>We use arrows (<code>-&gt;</code>) to denote dependencies between the
attributes. In the linear example, we defined the entire hierarchy with
one continuous string of attributes (i.e.,
<code>"A1 -&gt; A2 -&gt; A3"</code>). However, we could also define each
pairwise relationship separately. For example,
<code>"A1 -&gt; A2 A2 -&gt; A3"</code> would be an equivalent
specification. Alternatively, we can also define the hierarchy in a
separate variable that is passed to the structural model function.
Consider a converging structure, where proficiency of two or more
attributes is required before a culminating attribute. All of the
following specifications are equivalent.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A1 -&gt; A3 &lt;- A2"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A1 -&gt; A3 A2 -&gt; A3"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">converge</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  A1 -&gt; A3</span></span>
<span><span class="st">  A2 -&gt; A3</span></span>
<span><span class="st">"</span></span>
<span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="va">converge</span><span class="op">)</span></span></code></pre></div>
<p>Finally, we can similarly define a diverging structure, where one
attribute serves as a precursor to two or more attributes. Note that
although we have used <code><a href="../reference/structural-model.html">hdcm()</a></code> in these examples, the same
hierarchy specifications can be provided to <code><a href="../reference/structural-model.html">bayesnet()</a></code> as
well.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A2 &lt;- A1 -&gt; A3"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A1 -&gt; A2 A1 -&gt; A3"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">diverge</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  A1 -&gt; A2</span></span>
<span><span class="st">  A1 -&gt; A3</span></span>
<span><span class="st">"</span></span>
<span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="va">diverge</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="complex-structures">Complex structures<a class="anchor" aria-label="anchor" href="#complex-structures"></a>
</h3>
<p>In a complex structures, multiple simple structures are combined into
a larger web of attribute relationships. Depending on the number of
attributes included on an assessment, there are an almost unlimited
number of structures a hierarchy could take by mixing linear,
convergent, and divergent relationships. As an overview of how different
structures can be specified in dcmstan, we’ll consider a few example
structures with two, three, four-levels of hierarchy.</p>
<div class="figure">
<img src="attribute-hierarchies_files/figure-html/complex-structure-1.png" class="r-plt" alt="Complex attribute structures" width="768"><p class="caption">
Complex attribute structures
</p>
</div>
<p>In the two-level structure, A1 and A2 serve as precursors to two
attributes each. A3 and A4 are the culminating attributes of A1, while
A4 and A5 are the culminating attributes of A2. A4 represents a
converging relationship between A1 and A2. As with the simple
structures, this relationship can be specified as one continuous chain
or as a series of different relationships. All are equivalent.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A3 &lt;- A1 -&gt; A4 &lt;- A2 -&gt; A5"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A1 -&gt; A3 A2 -&gt; A5 A1 -&gt; A4 &lt;- A2"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">complex2</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  A1 -&gt; A3</span></span>
<span><span class="st">  A1 -&gt; A4</span></span>
<span><span class="st">  A2 -&gt; A4</span></span>
<span><span class="st">  A2 -&gt; A5</span></span>
<span><span class="st">"</span></span>
<span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="va">complex2</span><span class="op">)</span></span></code></pre></div>
<p>Similarly, we can define a three-level hierarchical structure that
mixes linear, converging, and diverging structures. In this
configuration, A1 diverges to A2 and A3. A3 then is a convergence
between A1 and A4. Finally, A5 has a linear dependency on A3. In this
example, the full structure can not be written as a single chain .
Therefore, we can specify the structure in as two smaller relationships,
such as <code>"A2 &lt;- A1 -&gt; A3 &lt;- A4"</code> and
<code>"A3 -&gt; A5"</code>, or as a series of pairwise relationships as
in the previous examples.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A2 &lt;- A1 -&gt; A3 &lt;- A4 A3 -&gt; A5"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">complex3</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  A1 -&gt; A2</span></span>
<span><span class="st">  A1 -&gt; A3</span></span>
<span><span class="st">  A4 -&gt; A3</span></span>
<span><span class="st">  A3 -&gt; A5</span></span>
<span><span class="st">"</span></span>
<span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="va">complex3</span><span class="op">)</span></span></code></pre></div>
<p>Finally consider a four-level hierarchy that also mixes all three
simple structures, but in different configurations. In this example, A1
is a linear precursor to A2. A2 then diverges into A3 and A4, which both
then converge back on A5. This structure again can be defined in a
single chain, multiple smaller relationships, or pairwise relationships
equivalently.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A1 -&gt; A2 -&gt; A3 -&gt; A5 &lt;- A4 &lt;- A2"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A1 -&gt; A2 -&gt; A3 -&gt; A5 A2 -&gt; A4 -&gt; A5"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">complex4</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  A1 -&gt; A2</span></span>
<span><span class="st">  A2 -&gt; A3</span></span>
<span><span class="st">  A2 -&gt; A4</span></span>
<span><span class="st">  A3 -&gt; A5</span></span>
<span><span class="st">  A4 -&gt; A5</span></span>
<span><span class="st">"</span></span>
<span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="va">complex4</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="disallowed-structures">Disallowed structures<a class="anchor" aria-label="anchor" href="#disallowed-structures"></a>
</h2>
<p>So far, we have discussed how different attribute structures can be
specified within dcmstan. However, there are some structures that are
not allowed. Namely, a structure must be a directed acyclic graph <span class="citation">(DAG; <a href="#ref-almond2015">Almond et al.,
2015</a>)</span>, meaning that if we follow the directions of the
arrows, we must not be able to form a closed loop and return to an
attribute we have already visited.</p>
<div class="figure">
<img src="attribute-hierarchies_files/figure-html/cyclic-structure-1.png" class="r-plt" alt="Invalid attribute structures" width="768"><p class="caption">
Invalid attribute structures
</p>
</div>
<p>In the first example, we can start at A1 and return to A1 by
following the path <code>A1 -&gt; A2 -&gt; A3 -&gt; A1</code>. Similarly
in the second example, there are multiple closed loops. For example, we
can create a loop from
<code>A1 -&gt; A5 -&gt; A2 -&gt; A4 -&gt; A1</code> or
<code>A3 -&gt; A4 -&gt; A1 -&gt; A5 -&gt; A2 -&gt; A3</code>. Thus, both
of these structures would be invalid. If you specify and invalid
attribute structure, you will be met with an error.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="st">"A1 -&gt; A2 -&gt; A3 -&gt; A1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `hdcm()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `hierarchy` must not be cyclical</span></span>
<span></span>
<span><span class="va">attribute_structure</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  A4 -&gt; A1 -&gt; A5 -&gt; A2</span></span>
<span><span class="st">  A3 &lt;- A2 -&gt; A4 &lt;- A3</span></span>
<span><span class="st">"</span></span>
<span><span class="fu"><a href="../reference/structural-model.html">hdcm</a></span><span class="op">(</span>hierarchy <span class="op">=</span> <span class="va">attribute_structure</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `hdcm()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `hierarchy` must not be cyclical</span></span></code></pre></div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0" line-spacing="2">
<div id="ref-almond2015" class="csl-entry">
Almond, R. G., Mislevy, R. J., Steinberg, L. S., Yan, D., &amp;
Williamson, D. M. (2015). <em>Bayesian networks in educational
assessment</em>. Springer. <a href="https://doi.org/10.1007/978-1-4939-2125-6" class="external-link">https://doi.org/10.1007/978-1-4939-2125-6</a>
</div>
<div id="ref-bayesnet" class="csl-entry">
Hu, B., &amp; Templin, J. (2020). Using diagnostic classification models
to validate attribute hierarchies and evaluate model fit in
<span>Bayesian</span> networks. <em>Multivariate Behavioral
Research</em>, <em>55</em>(2), 300–311. <a href="https://doi.org/10.1080/00273171.2019.1632165" class="external-link">https://doi.org/10.1080/00273171.2019.1632165</a>
</div>
<div id="ref-hdcm" class="csl-entry">
Templin, J., &amp; Bradshaw, L. (2014). Hierarchical diagnostic
classification models: <span>A</span> family of models for estimating
and testing attribute hierarchies. <em>Psychometrika</em>,
<em>79</em>(2), 317–339. <a href="https://doi.org/10.1007/s11336-013-9362-0" class="external-link">https://doi.org/10.1007/s11336-013-9362-0</a>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://wjakethompson.com" class="external-link">W. Jake Thompson</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
